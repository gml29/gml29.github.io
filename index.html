<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lua Obfuscator</title>
  <style>
    *,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:'Segoe UI',Tahoma,Verdana,sans-serif;height:100vh;background:#121212;color:#fff;display:flex;align-items:center;justify-content:center;}
    :root{--red:#ff0040;--white:#ffffff;}
    .navbar{position:fixed;top:0;left:0;right:0;z-index:9;height:4rem;background:#1a1a1a;border-bottom:2px solid var(--red);box-shadow:0 0 10px var(--red);display:flex;align-items:center;justify-content:space-between;padding:0 2rem;}
    .logo{font-weight:bold;font-size:1.5rem;color:var(--red);text-shadow:0 0 8px var(--red);} .logo span{color:var(--white);}
    .nav a{color:var(--white);margin-left:1rem;text-shadow:0 0 6px var(--red);transition:.3s;} .nav a:hover{color:var(--red);}
    form{width:420px;margin-top:6rem;}
    .card{background:#1a1a1a;border:2px solid var(--red);border-radius:12px;padding:1.8rem;box-shadow:0 0 15px var(--red);}
    .card-header h3{text-align:center;color:var(--white);text-shadow:0 0 8px var(--red);margin-bottom:1rem;}
    .filescript label{display:block;background:#1a1a1a;color:var(--white);border:2px solid var(--red);border-radius:6px;padding:.8rem;text-align:center;margin-bottom:1rem;cursor:pointer;text-shadow:0 0 5px var(--red);transition:.3s;} .filescript label:hover{background:var(--red);} .filescript input[type="file"]{display:none;}
    #num-of-files{text-align:center;font-size:.85rem;color:#ccc;}
    .inputBox{position:relative;margin-top:1.2rem;margin-bottom:1.2rem;} .inputBox input{width:100%;padding:.9rem;background:#000;border:2px solid var(--red);border-radius:6px;color:var(--white);} .inputBox span{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#ccc;font-size:.85rem;transition:.3s;} .inputBox input:focus~span,.inputBox input:valid~span{top:0;font-size:.7rem;background:#1a1a1a;padding:0 4px;border-radius:4px;color:#fff;}
    button{width:100%;padding:1rem;border:none;border-radius:8px;font-weight:bold;color:#fff;cursor:pointer;transition:.3s;margin-top:.7rem;} 
    #obfuscate{background:var(--red);box-shadow:0 0 10px var(--red);} #obfuscate:hover{transform:scale(.97);box-shadow:0 0 15px var(--white);} 
    #decrypt{background:#444;box-shadow:0 0 10px rgba(255,255,255,.3);} #decrypt:hover{transform:scale(.97);box-shadow:0 0 15px rgba(255,255,255,.6);} 
  </style>
</head>
<body>
<nav class="navbar">
  <h1 class="logo"><span>GML</span>scator</h1>
  <div class="nav"><a href="#">Obfuscator</a></div>
</nav>

<form id="form">
  <div class="card">
    <div class="card-header"><h3>Obfuscator</h3></div>
    <div class="filescript">
      <input type="file" id="file"><label for="file">Select Script (Encrypt / Decrypt)</label>
      <div id="num-of-files">No File Chosen</div>
      <h5 style="text-align:center;color:#777; margin-top:5px">Only .lua or .txt file!</h5>
    </div>
    <div class="inputBox"><input type="text" id="key" required><span>Encrypt Key / Decrypt Key</span></div>
    <button type="submit" id="obfuscate">Encrypt / Obfuscate</button>
    <button type="button" id="decrypt">Decrypt</button>
  </div>
</form>

<script>
let realKey="";let leng=128;let k=0;
const abc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
let abcTab=[];for(let i=0;i<abc.length;i++){abcTab[i]=abc[i];}
let ran1="",ran2="",ran3="",ran4="",ran5="",ran6="";
for(let i=0;i<leng;i++){ran1+=abcTab[Math.floor(Math.random()*abcTab.length)];
ran2+=abcTab[Math.floor(Math.random()*abcTab.length)];
ran3+=abcTab[Math.floor(Math.random()*abcTab.length)];
ran4+=abcTab[Math.floor(Math.random()*abcTab.length)];
ran5+=abcTab[Math.floor(Math.random()*abcTab.length)];
ran6+=abcTab[Math.floor(Math.random()*abcTab.length)];}

const xorE=(sc,key)=>{const tabel=[];let k=0;for(let i=0;i<sc.length;i++){
let byteValue=sc.charCodeAt(i)+key.charCodeAt(k);k++;tabel.push(byteValue);
if(k==key.length){k=0;}}return tabel;};

function simpleDecrypt(arr,key){let res="";let kk=0;for(let x of arr){kk++;
res+=String.fromCharCode(x-key.charCodeAt(kk));if(kk==key.length)kk=0;}return res;}

const fileInput=document.getElementById("file"),num=document.getElementById("num-of-files"),read=new FileReader(),form=document.getElementById("form"),dBtn=document.getElementById("decrypt");

fileInput.addEventListener("change",()=>{let f=fileInput.files[0];if(!f)return;let n=f.name;let s=(f.size/1024).toFixed(2);num.innerHTML=`${n} (${s}Kb)`;});

form.addEventListener("submit",(e)=>{
 e.preventDefault();
 let f=document.getElementById("file").files[0];
 if(!f){alert('Upload file first!');return;}
 let key=document.getElementById("key").value;
 realKey="";for(let i=0;i<key.length;i++){realKey+='\\'+key.charCodeAt(i);}
 read.readAsText(f);
 read.onload=()=>{
 const sc=read.result;
 const tabel=xorE(sc,key);
 let strTable=tabel.toString();
 let blob=new Blob([strTable],{type:'text/plain'});
 const url=URL.createObjectURL(blob);
 const a=Object.assign(document.createElement('a'),{href:url,style:'display:none',download:'Encrypted_'+f.name});
 a.click();URL.revokeObjectURL(url);a.remove();
 }
});

dBtn.addEventListener('click',()=>{
 let f=fileInput.files[0];
 if(!f){return alert('Upload encrypted file (hasil encrypt) !');}
 let key=document.getElementById('key').value;
 read.readAsText(f);
 read.onload=()=>{
 try{
  let arr=read.result.split(',').map(x=>parseInt(x.trim()));
  let plain=simpleDecrypt(arr,key);
  let blob=new Blob([plain],{type:'text/plain'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');a.href=url;a.download='Decrypted_'+f.name;
  a.click();URL.revokeObjectURL(url);
 }catch(e){alert('Failed decrypt! wrong key atau bukan hasil encrypt dari sini');}
 }
});
</script>
</body>
</html>
